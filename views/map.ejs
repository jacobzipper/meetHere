<!DOCTYPE html> <html class="set set-podd"> <head> <meta charset="utf-8" lang="en"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>meetHere</title> <link rel="apple-touch-icon" sizes="180x180" href="./img/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" href="./img/favicons/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="./img/favicons/favicon-16x16.png" sizes="16x16"> <link rel="manifest" href="./img/favicons/manifest.json"> <link rel="mask-icon" href="https://meetHere.github.io/img/favicons/safari-pinned-tab.svg" color="#eb5757"> <link rel="shortcut icon" href="./img/favicons/favicon.ico"> <meta name="msapplication-config" content="./img/favicons/browserconfig.xml"> <meta name="theme-color" content="#ffffff"> <script src="https://use.fontawesome.com/f4adeaf9c5.js"></script> <link href="./Avenir/stylesheet.css" rel="stylesheet" type="text/css" media="all"> <link rel="stylesheet" type="text/css" href="./css/style.min.css"> <link rel="stylesheet" type="text/css" href="./css/molekule.min.css"> <link rel="stylesheet" type="text/css" href="./css/jquery.powertip-dark.min.css"> <link rel="stylesheet" type="text/css" href="./waves/waves.min.css"> <script src="https://code.jquery.com/jquery-2.1.4.min.js" podsum="sha256-8WqyJLuWKRBVhxXIL1jBDD7SDxU936oZkCnxQbWwJVw="></script> <script src="./js/pageload.min.js"></script> <script src="./js/jquery.powertip.min.js"></script> <script src="./waves/waves.min.js"></script> </head> <body class="animsition"> <script>"https:"!=location.protocol&&(location.href="https:"+window.location.href.substring(window.location.protocol.length))</script> <div class="se-pre-con"> <div class="img-holder" style="position:absolute;top:42%;transform:translate(-50%,-50%) scale(.1);-webkit-transform:translate(-50%,-50%) scale(.1)"> <img src="./img/meetHere.svg" style="position:absolute;text-align:center;-webkit-animation:pulser 1s ease-in-out infinite;animation:pulser 1s ease-in-out infinite"> </div> </div> <script>var init={async:!0,crossDomain:!0,url:"https://meethere.herokuapp.com/getfriends",method:"POST",xhrFields:{withCredentials:!0},data:{}};$.ajax(init).done(function(e){0!=e.error&&(window.location.href="https://meethere.herokuapp.com")})</script> <span class="marker marker-1"></span> <div class="navbar hero"> <div class="col-80 top"> <a class="brand logo animsition-link" href="./map" data-animsition-out-class="fade-out"> </a> </div> <div class="nav-links"> <span id="profile-image-nav" class="profile-image-nav" style="cursor:pointer">MJ</span> <a id="map-page-help" class="page-link animsition-link help" href="./help" style="font-size:.75em"> Help</a> </div> <div id="mobile-nav-links" class="mob-nav close" style="position:absolute;top:50px;background:#FFF;font-size:.75em;padding:0 1em 1em 1em;border-radius:0;border:.1em solid rgba(0,0,0,.1);border-top:0"> <a id="meet" class="profile-title nav-overlay" href="#" style="line-height:1.5em" onclick="meet()">Meet</a> <a id="manage-friends" class="profile-title" href="#" style="line-height:1.5em" onclick="manageFriends()">Friends</a> <a id="preferences" class="profile-title" href="#" style="line-height:1.5em" onclick="preferences()">Preferences</a> <a id="logout" class="profile-title" href="#" style="line-height:1.5em">Log Out</a> </div> </div> <div id="map" style="height:100%;width:100%;z-index:-1"></div> <script>function myMap(){function e(e){latitude=e.coords.latitude,longitude=e.coords.longitude,i=!0,o()}function t(){$.post("https://meethere.herokuapp.com/getlocationuser",{},function(e){console.log(e),latitude=parseFloat(e.latitude),longitude=parseFloat(e.longitude),i=!0,o()},"json")}function o(){var e=[{featureType:"all",stylers:[{lightness:70}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]}],t=new google.maps.StyledMapType(e,{name:"Styled Map"}),o={center:new google.maps.LatLng(latitude,longitude),zoom:15,disableDefaultUI:!0,zoomControl:!0};map=new google.maps.Map(a,o),myCenter=new google.maps.LatLng(latitude,longitude);var n=new RichMarker({position:myCenter,map:map,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<span class="map-marker" style="opacity:0.25">Me</span>'});markersArray.push(n),map.mapTypes.set("map_style",t),map.setMapTypeId("map_style"),infowindow=new google.maps.InfoWindow}var a=document.getElementById("map"),n={enableHighAccuracy:!1,timeout:2e3,maximumAge:3e5},i=!1;navigator.geolocation.getCurrentPosition(e,t,n),setTimeout(function(){i?window.console.log("Location set"):(window.console.log("Firefox Bug"),t())},n.timeout+1e3)}var map,myCenter,latitude,longitude,clickCounter=0,loc={},markersArray=[]</script> <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBV0Q6zglTeVi36cx0v_QeE0wkiveg97HA&libraries=places&callback=myMap"></script> <script src="./js/richmarker.min.js"></script> <style>.sidenav{height:100%;background:rgba(238,238,238,.75);z-index:1;position:fixed;left:0;transition:all .25s linear;-webkit-transition:all .25s linear}@media only screen and (max-width:799px){.sidenav{bottom:0;height:40%;width:100%;background:rgba(238,238,238,.9)}}.sidenav.closed{left:-25%;transition:all .25s linear;-webkit-transition:all .25s linear}.sidenav.closed .sidenav-display-btn{transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}.hero-type-container{width:100%;max-height:calc(100% - 1.9em);overflow-y:auto;box-shadow:0 0 2px 0 rgba(0,0,0,.14),0 0 15px 0 rgba(0,0,0,.12),0 0 1px -2px rgba(0,0,0,.2)}.hero-type-row{position:relative;height:2.5em;width:90%;padding:5%;border-bottom:1px solid #E9E6E3;overflow:hidden;transition:all .5s ease;-webkit-transition:all .5s ease}.hero-type-row.open{height:7.5em;transition:all .5s ease;-webkit-transition:all .5s ease}.hero-type-row>div{position:absolute;display:inline-block}.hero-type-row>div:first-child{position:relative}.hero-type-row>.page-link{margin-top:.5em;opacity:1;color:#66cdaa;margin-left:1.5em}.hero-type-row>.page-link.uber{color:rgba(0,0,0,.9);display:inline-block;margin-top:0}.hero-type-row>.page-link.meetHere{color:#EB5757;display:inline-block;margin-top:0;cursor:pointer}.hero-type-distance{right:5%}.hero-type-time{right:5%}.hero-type-rating{position:relative!important;left:-70%}.hero-drop-down{font-size:1.5em;position:absolute;bottom:0;right:5%;cursor:pointer;transition:all .5s ease;-webkit-transition:all .5s ease}.hero-type-price{position:relative;display:block;width:5.5em;height:1.25em}.hero-type-row.open .hero-drop-down{transform:rotate(180deg);-webkit-transform:rotate(180deg);transition:all .5s ease;-webkit-transition:all .5s ease}.hero-type-rating>span{height:.4em;width:.4em;border:1px solid #EB5757;display:inline-block;border-radius:50%;margin-right:.4em}.hero-type-rating>span.filled{background:#EB5757}.hero-type-rating>span.unknown-rating{background:#CCC;border-color:#999;opacity:.16}.hero-type-row .chosen-list-horizontal{font-size:1em;width:70%;height:1.75em;margin-bottom:0;overflow-x:scroll;overflow-y:hidden}.fa-compass{position:absolute;left:-1.43em;line-height:.9em}.sidenav-display-btn{position:absolute;left:100%;width:1em;height:2em;line-height:2em;font-size:1.5em;text-align:center;box-shadow:1px 0 2px rgba(0,0,0,.1);background:#f0dac5;cursor:pointer}</style> <div id="sidenav" class="profile col-25 sidenav" style="display:none"> <div class="sidenav-display-btn"><i class="fa fa-angle-left"></i></div> <div id="types-of-locs" style="font-size:1.5em;height:1.25em;width:100%;box-sizing:border-box;box-shadow:0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12),0 0 10px -5px rgba(0,0,0,.2)"> <div class="type-name"> <div id="chooseFood" class="type chosen">Food</div> </div> <div class="type-name"> <div id="chooseFun" class="type chosen">Fun</div> </div> <div class="type-name"> <div id="chooseStudy" class="type chosen">Study</div> </div> </div> <div id="hero-type-container" class="hero-type-container"> </div> </div> <div id="profile" class="profile col-25" style="height:100%;display:inline-block"> <div class="center-total"> <div class="profile-image" style="margin-bottom:30px"> <div id="profile-image" style="position:relative;top:50%;transform:translateY(-40%);-webkit-transform:translateY(-40%)">MJ</div> </div> <a id="meet" class="profile-title nav-overlay" href="#" onclick="meet()">Meet</a> <a id="manage-friends" class="profile-title" href="#" onclick="manageFriends()">Manage Friends</a> <a id="preferences" class="profile-title" href="#" onclick="preferences()">Preferences</a> <a id="logout" class="profile-title special-logout" href="#">Log Out</a> </div> </div> <div id="map-input" class="intro" style="height:100%;display:inline-block"> <div class="center-total"> <div class="row"> <div class="intro-text"> <div class="choose-friends"> <span id="map-title-first">With whom would you like to meet?</span> <br> <div style="width:100%"> <div id="chosen-list-parent" class="inline hidden-mobile" style="margin-top:40px;width:15%;font-size:.3em;vertical-align:top;display:none"> <div class="button inline" style="visibility:hidden"><i class="fa fa-fa" style="color:#EB5757;line-height:1.75em;vertical-align:top"></i></div> <div style="overflow-y:auto;max-height:15.5em"> <div id="chosen-list" class="" style="text-align:left;font-size:1.666em"> </div> </div> </div> <div class="input-container" style="font-size:.3em;margin-top:40px;width:75%;max-width:500px;display:inline-block"> <input id="user" class="password user-adder" placeholder="Start typing to filter" autocorrect="false" spellcheck="false" style="background:0 0;width:75vw;max-width:500px;margin-bottom:20px" autocomplete="off"> <div class="button inline" style="background:0 0"></div> <div id="aaf" class="chosen-list-horizontal" style="display:none"> <div id="rrf" class="chosen-list-container"> </div> </div> <div style="overflow-y:auto;max-height:7.5em"> <div id="added-list" class="" style="text-align:left;font-size:1.666em"> <script>$.post("https://meethere.herokuapp.com/getfriends",{},function(e){for(var d=e.friends,n=0;n<d.length;n++)$("#added-list").append('<div class="friend">'+d[n]+"</div>")},"json")</script> </div> <div id="manage-friends-adder" class="" style="text-align:left;font-size:1.666em;display:none;text-align:center"> <div id="friend-tbadded" class="potential-friend" style="display:none"></div><span id="req-confirmation" class="hidden"></span> </div> </div> <div id="pref-panel" class="hidden" style="font-size:2.5em"> <div style="position:absolute;left:0;display:inline-block;color:#A0A0A0">Name:</div> <div style="position:absolute;right:0;display:inline-block"><div id="profile-name" style="display:inline-block" contenteditable="true" spellcheck="false" autocomplete="false"></div><i id="name-change-pencil" class="fa fa-pencil" style="margin-left:.25em;color:#66cdaa;font-size:.625em;cursor:pointer;position:absolute;top:.4em" onclick='$("#profile-name").focus()'></i><i id="name-change-check" class="fa fa-check hidden" style="margin-left:.25em;color:#91DCE8;font-size:.625em;cursor:pointer;position:absolute;top:.4em" onclick="submitNewName()"></i></div> <br> <div style="position:absolute;left:0;margin-top:1em;color:#A0A0A0">Home Location:</div> <br> <br> <div style="font-size:.333333em;position:absolute;left:0;width:100%"> <div class="input-container" style="text-align:left;width:100%"> <input id="location" class="password" placeholder="1600 Pennsylvania Ave" autocorrect="false" spellcheck="false" style="width:100%;text-align:left;margin-bottom:.5em;padding-top:.2em;background:0 0"> </div> <br> <div style="text-align:left"> <div id="get-location-button" class="button-left" onclick="getCurrentLoc()" style="background:#F0DAC5;margin-bottom:60px"><i class="fa fa-location-arrow"></i></div><i id="current-location-pos" class="fa fa-check" style="color:#66cdaa;margin-left:.5em;font-size:2em;display:none"></i><i id="current-location-neg" class="fa fa-times" style="color:#FB5757;margin-left:.5em;font-size:2em;display:none"></i> <div id="submit-location" class="button-left hidden" style="position:absolute;right:0;background:#91DCE8" onclick="updateLocation()">Set Location</div> </div> </div> </div> <div id="friends-request-name" class="hidden" style="font-size:2.5em;margin-top:.5em">Users who have added you:</div> <div id="friends-request-list" class="hidden" style="font-size:1.666em"></div> <br> <div id="next-button" class="support-button password-button material-button inline" style="font-size:1.666666em;margin-top:1em;display:none">Next</div> </div> </div> </div> </div> </div> </div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/vivus/0.3.2/vivus.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script> <script src="./js/meetHere.min.js"></script> <script>function checkForFriends(){$.post("https://meethere.herokuapp.com/getinpending",{},function(e){if(e.friends.length>0){$("#manage-friends").append('<span id="friends-notif" style="padding:0.25em 0.25em 0.05em;background:#FB5757;color:#FFF;display:inline-block;border-radius:1em;transform:translateX(0.5em) scale(0.75);-webkit-transform:translateX(0.5em) scale(0.75)">'+e.friends.length+"</span>"),areFriendRequests=!0;for(var a=0;a<e.friends.length;a++)$("#friends-request-list").append('<div id="requesting-'+e.friends[a]+'" class="requesting reqComp" style="margin-top:1.5em"><span style="display:block;width:100%"><span class="potential-friend-eq" style="text-align:left">'+e.friends[a]+'</span><span style="position:absolute;right:0;line-height:2.25em"><i class="fa fa-user-plus add-requesting-friend" style="color:mediumaquamarine;cursor:pointer;margin-right:1em;" friend-name="'+e.friends[a]+'"></i><i class="fa fa-user-times reject-requesting-friend" style="color:#FB5757;cursor:pointer" friend-name="'+e.friends[a]+'"></i></span></span></div><br id="requesting-'+e.friends[a]+'-break" class="reqComp">');$(".add-requesting-friend").on("click",function(){$.post("https://meethere.herokuapp.com/addfriend",{friend:$(this).attr("friend-name")},function(e){console.log(e.error),$(".friend-added").click(),$(".friend").remove(),$.post("https://meethere.herokuapp.com/getfriends",{},function(e){for(var a=e.friends,n=0;n<a.length;n++)$("#added-list").append('<div class="friend">'+a[n]+"</div>")},"json")},"json")}),$(".reject-requesting-friend").on("click",function(){$.post("https://meethere.herokuapp.com/subfriend",{friend:$(this).attr("friend-name")},function(e){console.log(e.error)},"json")}),$(".add-requesting-friend, .reject-requesting-friend").on("click",function(){$("#requesting-"+$(this).attr("friend-name")).remove(),$("#requesting-"+$(this).attr("friend-name")+"-break").remove(),0==$(".add-requesting-friend").length&&$("#friends-request-name").addClass("hidden")})}else areFriendRequests=!1},"json")}function preferences(){$("#preferences").hasClass("nav-overlay")||($("#manage-friends").hasClass("nav-overlay")&&($(".reqComp").remove(),checkForFriends()),$(".nav-overlay").removeClass("nav-overlay"),$("#preferences").addClass("nav-overlay"),$("#map-title-first").html("Preferences"),$("#added-list").hide(),$("#user").hide(),$("#types-of-locs").addClass("hidden"),$("#next-button").hide(),$("#chosen-list-parent").hide(),$("#manage-friends-adder").hide(),$("#friends-request-name").addClass("hidden"),$("#friends-request-list").addClass("hidden"),$("#pref-panel").removeClass("hidden"),0==firstPref&&(initAutocomplete(),firstPref++))}function manageFriends(){$("#manage-friends").hasClass("nav-overlay")||$("#user").val(""),$(".nav-overlay").removeClass("nav-overlay"),$("#manage-friends").addClass("nav-overlay"),$("#map-title-first").html("Add some friends!"),$("#added-list").hide(),$("#manage-friends-adder").show(),$("#user").show(),$("#user").attr("placeholder","bGanesh").addClass("manage-friends-add"),$("#types-of-locs").addClass("hidden"),$("#friends-notif").remove(),$("#next-button").hide(),$("#chosen-list-parent").hide(),$("#pref-panel").addClass("hidden"),areFriendRequests&&($("#friends-request-name").removeClass("hidden"),$("#friends-request-list").removeClass("hidden"))}function meet(){$("#meet").hasClass("nav-overlay")||($("#manage-friends").hasClass("nav-overlay")&&($(".reqComp").remove(),checkForFriends()),$(".nav-overlay").removeClass("nav-overlay"),$("#meet").addClass("nav-overlay"),$("#map-title-first").html("With whom would you like to meet?"),$("#added-list").show(),$("#manage-friends-adder").hide(),$("#user").show(),$("#user").attr("placeholder","Start typing to filter").removeClass("manage-friends-add").val(""),$("#types-of-locs").removeClass("hidden"),$("#friends-request-name").addClass("hidden"),$("#friends-request-list").addClass("hidden"),$("#pref-panel").addClass("hidden"),$(".friend-added").length>0&&($("#chosen-list-parent").show(),$("#next-button").show()))}function initAutocomplete(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("location"),{types:["geocode"]}),autocomplete.addListener("place_changed",getCoors)}function getCoors(){var e=autocomplete.getPlace();newLat=e.geometry.location.lat(),newLong=e.geometry.location.lng(),$("#submit-location").removeClass("hidden")}function getCurrentLoc(){function e(e){newLat=e.coords.latitude,newLong=e.coords.longitude,$("#submit-location").removeClass("hidden"),$("#current-location-pos").show(),$("#current-location-neg").hide()}function a(){$("#current-location-pos").hide(),$("#current-location-neg").show()}navigator.geolocation.getCurrentPosition(e,a)}function updateLocation(){$.post("https://meethere.herokuapp.com/updatelocation",{latitude:newLat,longitude:newLong},function(e){window.location.reload()},"json")}function showAllMapStuff(){function e(e,n,t){if(n===google.maps.places.PlacesServiceStatus.OK)for(var s=0;s<9;s++)a(e[s],t)}function a(e,a){var n=(e.geometry.location,e.geometry.location.lat()),t=bounds.getCenter().lat(),s=e.geometry.location.lng(),o=bounds.getCenter().lng(),r=6371e3,i=n.toRadians(),d=t.toRadians(),l=(t-n).toRadians(),p=(o-s).toRadians(),f=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(d)*Math.sin(p/2)*Math.sin(p/2),h=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),u=r*h,g=800/u;g<.2&&(g=.2);var y=new RichMarker({position:e.geometry.location,map:map,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<span class="map-marker marker-res '+a+" open-"+c+'" data-map-item="open-'+c+'" style="cursor:pointer;opacity:'+g+'">'+e.name+"</span>",dataMapItem:"open-"+c}),v='<span class="unknown-rating"></span><span class="unknown-rating"></span><span class="unknown-rating"></span><span class="unknown-rating"></span><span class="unknown-rating"></span>';if(null!=e.rating){var C=e.rating;v=C<.5?"<span></span><span></span><span></span><span></span><span></span>":C<1.5?'<span class="filled"></span><span></span><span></span><span></span><span></span>':C<2.5?'<span class="filled"></span><span class="filled"></span><span></span><span></span><span></span>':C<3.5?'<span class="filled"></span><span class="filled"></span><span class="filled"></span><span></span><span></span>':C<4.5?'<span class="filled"></span><span class="filled"></span><span class="filled"></span><span class="filled"></span><span></span>':'<span class="filled"></span><span class="filled"></span><span class="filled"></span><span class="filled"></span><span class="filled"></span>'}var k='<img src="https://img.shields.io/badge/price_level-%3F-lightgrey.svg?style=flat-square" style="opacity:0.08">';if(null!=e.price_level){var b,w=e.price_level;b=w>4?"c00":w>3?"f80":w>2?"fb3":w>1?"00c851":"33b5e5",k='<img src="https://img.shields.io/badge/price_level-'+w+"-"+b+'.svg?style=flat-square">'}$("#hero-type-container").append('<div class="hero-type-row '+a+" type-row-"+c+'"><div class="hero-type-name chosen-list-horizontal"><div class="chosen-list-container"><div>'+e.name+'</div></div></div><div class="hero-type-distance distance-place-'+c+'">'+getDistanceFromCenter(e.geometry.location)+'</div><div class="hero-type-rating">'+v+'</div><span class="hero-drop-down fa fa-angle-down open-'+c+'" data-map-item="open-'+c+'"></span><span class="hero-type-price">'+k+"</span></div>"),m[c]=e,orderByDistance(c),colorByDistance(c),google.maps.event.addListener(y,"click",function(){if(clickCounter%2==1&&this==samePlace){if(map.setCenter(bounds.getCenter()),map.fitBounds(bounds),map.setZoom(14),!angleClicked){$(".hero-drop-down."+this.dataMapItem).parent().toggleClass("open");var a=$("#hero-type-container"),n=$(".hero-drop-down."+this.dataMapItem).parent();a.animate({scrollTop:n.offset().top-a.offset().top+a.scrollTop()})}}else{if(map.setCenter(e.geometry.location),map.setZoom(18),!angleClicked){$(".hero-drop-down").parent().removeClass("open"),$(".hero-drop-down."+this.dataMapItem).parent().toggleClass("open");var a=$("#hero-type-container"),n=$(".hero-drop-down."+this.dataMapItem).parent();a.animate({scrollTop:n.offset().top-a.offset().top+a.scrollTop()})}samePlace=this}angleClicked=!1,clickCounter++}),c++}$(window).width()<800&&$("#map").css("height","60%"),$(".choose-friends, .profile, .navbar").slideUp("fast"),$(".map-marker").addClass("larger-marker").attr("style",""),$(".gm-bundled-control-on-bottom").css("opacity","1");var n=$("[title='Zoom in']").parent().parent().parent().position().top,t=$("[title='Zoom in']").parent().parent().parent().position().left,s=$("[title='Zoom in']").width(),o=$("[title='Zoom in']").height(),r=$("[title='Zoom in']").height()/5*3,i=r/5*2;$("body").prepend('<div id="bumpReload" style="position:fixed;top:'+(n-o/1.6)+"px;left:"+(t+s/2.83)+"px;width:"+s+"px;height:"+o+'px;background:#EB5757;box-shadow: rgba(0, 0, 0, 0.298039) 0px -1px 5px -1px;border-radius: 2px 2px 0 0;cursor:pointer;z-index:1"onclick="window.location.reload()"><i class="fa fa-repeat"style="font-size:'+r+"px;position:absolute;left:"+i/.95+"px;top:"+i/1.1+'px;cursor:pointer"></i></div>'),appliedCenter=map.getCenter(),appliedCenterDistance=parseFloat(getDistanceFromUser(appliedCenter).substring(0,3));var d=(new RichMarker({position:map.getCenter(),map:map,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<span class="blue-marker"></span>'}),[myCenter,map.getCenter()]),l=new google.maps.Polyline({path:d,geodesic:!0,strokeColor:"#A0A0A0",strokeOpacity:.25,strokeWeight:1});l.setMap(map),$(".friend-added").each(function(){d=[loc[$(this).text()],map.getCenter()],l=new google.maps.Polyline({path:d,geodesic:!0,strokeColor:"#A0A0A0",strokeOpacity:.25,strokeWeight:1}),l.setMap(map)});var p=new google.maps.places.PlacesService(map);p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["cafe"]},function(a,n){e(a,n,"type-study")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["library"]},function(a,n){e(a,n,"type-study")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["restaurant"]},function(a,n){e(a,n,"type-food")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["meal_takeaway"]},function(a,n){e(a,n,"type-food")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["bar"]},function(a,n){e(a,n,"type-food")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["amusement_park"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["aquarium"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["art_gallery"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["casino"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["shopping_mall"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["night_club"]},function(a,n){e(a,n,"type-fun")}),p.nearbySearch({location:map.getCenter(),rankBy:google.maps.places.RankBy.DISTANCE,types:["movie_theater"]},function(a,n){e(a,n,"type-fun")});var c=0,m=[];map.setZoom(14),$("#map").css("z-index","0"),$("#sidenav").slideDown("fast")}function getDirInfo(e,a){var n=new google.maps.DirectionsService,t={origin:myCenter,destination:e.geometry.location,travelMode:google.maps.DirectionsTravelMode.DRIVING};n.route(t,function(n,t){if("OK"===t){var s=n.routes[0].legs[0];$(".distance-"+a).text(s.distance.text),$(".time-"+a).text(s.duration.text)}else"OVER_QUERY_LIMIT"==t&&setTimeout(function(){getDirInfo(e,a)},timeout)})}function getDistanceFromUser(e){var a=myCenter.lat(),n=e.lat(),t=myCenter.lng(),s=e.lng(),o=6371e3,r=a.toRadians(),i=n.toRadians(),d=(n-a).toRadians(),l=(s-t).toRadians(),p=Math.sin(d/2)*Math.sin(d/2)+Math.cos(r)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),m=o*c,f=.000621371192237*m,h=(Math.round(10*f)/10).toFixed(1)+" mi";return h}function getDistanceFromCenter(e){var a=appliedCenter.lat(),n=e.lat(),t=appliedCenter.lng(),s=e.lng(),o=6371e3,r=a.toRadians(),i=n.toRadians(),d=(n-a).toRadians(),l=(s-t).toRadians(),p=Math.sin(d/2)*Math.sin(d/2)+Math.cos(r)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),m=o*c,f=.000621371192237*m,h=(Math.round(10*f)/10).toFixed(1)+" mi";return h}function orderByDistance(e){var a=$(".type-row-"+e).find(".hero-type-distance").text().substring(0,3),n=parseFloat(a);if(e>0){var t=$(".type-row-"+(e-1)).find(".hero-type-distance").text().substring(0,3),s=parseFloat(t);n<s&&($(".type-row-"+e).insertBefore($(".type-row-"+(e-1))),$(".type-row-"+e).addClass("to-lower").removeClass("type-row-"+e),$(".type-row-"+(e-1)).addClass("to-increase").removeClass("type-row-"+(e-1)),$(".to-lower").addClass("type-row-"+(e-1)).removeClass("to-lower"),$(".to-increase").addClass("type-row-"+e).removeClass("to-increase"),orderByDistance(e-1))}}function colorByDistance(e){var a=$(".distance-place-"+e).text().substring(0,3),n=parseFloat(a);n/appliedCenterDistance<=.5?$(".distance-place-"+e).css("color","#6FCF97"):n/appliedCenterDistance<=1?$(".distance-place-"+e).css("color","#F2994A"):$(".distance-place-"+e).css("color","#EB5757")}var settings={async:!0,crossDomain:!0,url:"https://meethere.herokuapp.com/fullname",method:"POST",xhrFields:{withCredentials:!0},data:{}};$.ajax(settings).done(function(e){if(console.log(e),0==e.error){$("#profile-name").text(e.fullname);var a=e.fullname.split(" "),n=a[0].charAt(0).toUpperCase(),t=a[1].charAt(0).toUpperCase();$("#profile-image").text(n+t),$("#profile-image-nav").text(n+t)}});var areFriendRequests=!1;checkForFriends(),$(window).load(function(){$(".gm-bundled-control-on-bottom").css("opacity","0")});var firstPref=0;$(".d-friend-bg").powerTip({placement:"ne",followMouse:!0,fadeInTime:100,closeDelay:0}),$(".d-friend-bg").data("powertip","You and "+$(this).text()+" are already friends"),$("#profile-image-nav").on("touchend || click",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#mobile-nav-links").hasClass("close")?$("#mobile-nav-links").removeClass("hidden").addClass("open").removeClass("close"):($("#mobile-nav-links").addClass("close").removeClass("open"),setTimeout(function(){$("#mobile-nav-links").addClass("hidden")},300))}),$(document).on("touchend || click",function(e){var a=$(e.target);a.hasClass("mob-nav")||($("#mobile-nav-links").addClass("close").removeClass("open"),setTimeout(function(){$("#mobile-nav-links").addClass("hidden")},300))}),$("#map-input").on("click",function(){if(!$("#name-change-parent").hasClass("hidden"))if($("#profile-name").is(":focus")){$("#profile-name").css("border-bottom","2px solid #91DCE8"),$("#name-change-pencil").addClass("hidden");var e=$("#profile-name").text();validateFullName(e)&&e.indexOf(" ")>0&&e.indexOf(" ")<e.length-1&&$("#name-change-check").removeClass("hidden")}else $("#profile-name").css("border-bottom","0px solid #91DCE8"),$("#name-change-pencil").removeClass("hidden"),$("#name-change-check").addClass("hidden")}),$("#profile-name").keydown(function(e){if(13==e.which)return!1}),$("#profile-name").keyup(function(){var e=$("#profile-name").text();validateFullName(e)&&e.indexOf(" ")>0&&e.indexOf(" ")<e.length-1?$("#name-change-check").removeClass("hidden"):$("#name-change-check").addClass("hidden")}),$("#user").keyup(function(){if($(this).hasClass("manage-friends-add")){$("#powerTip").length>0&&$.powerTip.destroy(),$("#friend-tbadded").hide();var e=$(this).val().trim();""==e?$("#friend-tbadded").text(""):$("#friend-tbadded").text(e),$.post("https://meethere.herokuapp.com/addfriendtemp",{friend:e},function(e){console.log(e.error),lmnsh=e.error,0==e.error?($("#friend-tbadded").show(),0==$("#add-user-notif-button").length&&$("#friend-tbadded").append('<i id="add-user-notif-button" class="fa fa-user-plus" style="color:#FB5757;margin-left:0.5em;line-height:1em;font-size:0.625em;vertical-align:middle"></i>'),$("#friend-tbadded").removeClass("disabled").removeClass("d-friend-bg").removeClass("d-req-bg")):($("#add-user-notif-button").remove(),1!=e.error&&4!=e.error?$("#friend-tbadded").show():$("#friend-tbadded").hide(),2==e.error&&($("#friend-tbadded").addClass("disabled").addClass("d-friend-bg").removeClass("d-req-bg"),$(".d-friend-bg").powerTip({followMouse:!0,fadeInTime:100,closeDelay:0}),$(".d-friend-bg").data("powertip","You and <i>"+$(".d-friend-bg").text()+"</i> are already friends")),3==e.error&&($("#friend-tbadded").addClass("disabled").removeClass("d-friend-bg").addClass("d-req-bg"),$(".d-req-bg").powerTip({followMouse:!0,fadeInTime:100,closeDelay:0}),$(".d-req-bg").data("powertip","You have already requested <i>"+$(".d-req-bg").text()+"</i>")))},"json")}}),$("#friend-tbadded").on("click",function(){$(this).hasClass("disabled")||$.post("https://meethere.herokuapp.com/addfriend",{friend:$("#user").val().trim()},function(e){console.log(e.error),$("#req-confirmation").text("You've added "+$("#user").val().trim()+" :-)").removeClass("hidden"),setTimeout(function(){$("#req-confirmation").addClass("close-o")},1e3),setTimeout(function(){$("#req-confirmation").addClass("hidden").removeClass("close-o")},1300),$("#user").val("").val(""),$("#friend-tbadded").hide().text("")},"json")}),$("#logout").on("click",function(){$.get("./logout",{},function(e){window.location.reload()})}),$(".special-logout").on("click",function(){$.get("./logout",{},function(e){window.location.reload()})});var placeSearch,autocomplete,newLat,newLong;$("#location").on("keydown",function(){$(".pac-container").css("padding","0").css("margin","0"),$(".pac-container, .pac-item, .pac-item-selected").css("width",$("#location").width()+"px")}),Waves.attach(".friend"),Waves.init(),$("#map").attr("class","fixed"),function(e){function a(){n.width()<800?(t.remove(),e("#chosen-list").remove(),e("#rrf").attr("id","chosen-list"),e("#chosen-list-parent").remove(),e("#aaf").attr("id","chosen-list-parent"),e("#mobile-nav-links").css("left",e(".nav-links").position().left+o.width()/2-e("#mobile-nav-links").width()/2+"px"),e("#map-input").css("width","100%")):(s.addClass("col-75"),o.hide(),e("#mobile-nav-links").remove(),e(".chosen-list-horizontal:not(.hero-type-name)").remove())}var n=e(window),t=e("#profile"),s=e("#map-input"),o=e(".profile-image-nav");n.resize(a).trigger("resize")}(jQuery);var addedFriends=1;$("#user").keyup(function(){var e=$(".friend:not(.friend-added)"),a=$.trim(this.value).toUpperCase();""===a?e.show():(e.hide(),e.filter(function(){return-1!=$(this).text().toUpperCase().indexOf(a)}).show())});var bounds;$("#added-list").on("click",".friend",function(){var e=$(this);$.post("https://meethere.herokuapp.com/getlocation",{friend:$(this).text()},function(a){loc[e.text()]=new google.maps.LatLng(parseFloat(a.latitude),parseFloat(a.longitude)),console.log(loc[e.text()]),e.addClass("friend-added").attr("id",addedFriends),$("#chosen-list").prepend(e);var n=["","marker-1","marker-2"],t=new RichMarker({position:loc[e.text()],map:map,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<span id="'+addedFriends+'-marker" class="map-marker '+n[Math.floor(Math.random()*n.length+1)]+'" style="opacity:0.25">'+e.text()+"</span>"});markersArray.push(t),bounds=new google.maps.LatLngBounds;for(var s=0;s<markersArray.length;s++)bounds.extend(markersArray[s].getPosition());map.setCenter(bounds.getCenter()),map.fitBounds(bounds),$("#next-button").show(),$("#chosen-list-parent").show("fast"),addedFriends++},"json")}),$("#chosen-list").on("click",".friend",function(){$(this).removeClass("friend-added"),$("#added-list").prepend(this);var e=$(this).attr("id");$("#"+e+"-marker").remove(),markersArray[parseInt(e,10)]=new RichMarker({position:myCenter,map:map,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:""}),bounds=new google.maps.LatLngBounds;for(var a=0;a<markersArray.length;a++)bounds.extend(markersArray[a].getPosition());map.setCenter(bounds.getCenter()),map.fitBounds(bounds),0==$(".friend-added").length&&($("#next-button").hide(),$("#chosen-list-parent").hide("fast"),map.setZoom(15))});var angleClicked=!1,appliedCenter,appliedCenterDistance,samePlace;$("#next-button").on("click",function(){showAllMapStuff()});var timeout=600;$(".type").on("click",function(){$(this).toggleClass("chosen")}),$("#chooseFood").on("click",function(){$(".type-food").toggleClass("hidden")}),$("#chooseFun").on("click",function(){$(".type-fun").toggleClass("hidden")}),$("#chooseStudy").on("click",function(){$(".type-study").toggleClass("hidden")}),$("#hero-type-container").on("click",".hero-drop-down",function(){$(this).parent().toggleClass("open"),angleClicked=!0,$(".map-marker."+$(this).attr("data-map-item")).click()}),$(".sidenav-display-btn").on("click",function(){$("#sidenav").toggleClass("closed")}),"undefined"==typeof Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180})</script> </body> </html>